---
title: "Sanjivani 2.0"
subtitle: "AI Crop Doctor"
image: "/agriculture-ai-crop-disease.jpg"
iconName: "Sprout"
description: "Production-grade AI agriculture platform. Hybrid CNN+LLM architecture with edge optimization, multilingual support, and comprehensive testing‚Äîbuilt for real farmers and technical interviews."
stats: "95% Accuracy / <100ms Inference / 34 Tests"
tech: ["Next.js 14", "FastAPI", "Gemini 1.5", "TensorFlow", "Firebase", "Cloudflare", "Render"]
demoLink: "https://sanjivani-1ai.pages.dev/"
codeLink: "https://github.com/yash-ghodele/Sanjivani"
color: "from-emerald-500 to-green-600"
publishedAt: "2026-01-13"
---

# Sanjivani 2.0: Production-Grade AI Agriculture

> **This is not a tutorial project**‚Äîit's a **portfolio-grade system** showcasing end-to-end full-stack AI engineering with clean architecture, real-world failure modes, and measurable performance.

**Sanjivani 2.0** is a from-scratch rebuild of an AI crop disease detection platform. It combines **Edge AI** (MobileNetV2) with **Generative AI** (Gemini 1.5 Flash) to provide farmers with instant, intelligent, multilingual crop health advice.

---

## üéØ Why This Project Is Different

Most crop-disease projects stop at "model predicts a label." Sanjivani 2.0 focuses on **system design, reliability, and usability**.

**Key Differentiators:**

- **Clean Architecture** ‚Äî Clear separation: AI inference, knowledge base, API layer, frontend
- **Production-Ready APIs** ‚Äî REST v2 with structured responses, versioning, validation, performance metadata
- **Edge-Optimized AI** ‚Äî MobileNetV2 with <100ms latency, exportable to `.h5` and `.tflite`
- **Modern Frontend** ‚Äî Next.js App Router with "Deep Forest + Neon" glassmorphism theme
- **Real Testing Discipline** ‚Äî 34 automated tests, ~70% coverage, mock-mode CI support
- **Portfolio-First Engineering** ‚Äî Built to withstand technical interviews, not just demos

---

## üöÄ The Evolution: 1.0 ‚Üí 2.0

| Feature | Sanjivani 1.0 | **Sanjivani 2.0** |
| :--- | :--- | :--- |
| **Architecture** | Flask Monolith | **Next.js (Cloudflare) + FastAPI (Render)** |
| **AI Model** | MobileNetV2 Only | **Hybrid: CNN + Gemini 1.5 Flash** |
| **Scope** | Disease Detection | **Detection + Spraying Index + Crop Calendar** |
| **Languages** | English Only | **English, Hindi, Marathi (i18next)** |
| **Response** | Static Template | **Context-Aware LLM + Deterministic KB** |
| **Testing** | None | **34 Tests, Pytest, 70% Coverage** |
| **Deployment** | Manual | **CI/CD Ready (Cloudflare + Render)** |

---

## üß† Hybrid AI Architecture

### The Dual-Mode Inference Engine

We refused to compromise between **speed** and **intelligence**. Sanjivani uses a two-stage pipeline:

#### 1. Fast Neural Eye (MobileNetV2)
**Purpose:** Instant visual diagnosis  
**Performance:**
- **Accuracy:** 95%+ on PlantVillage dataset (7 disease classes)
- **Inference Time:** <100ms (edge-ready)
- **Model Size:** 14MB (.h5) ‚Üí 3MB (.tflite compressed)

```python
# ai/inference_engine.py
class InferenceEngine:
    def predict(self, image_bytes):
        img = preprocess_image(image_bytes)  # 224x224 RGB
        predictions = self.model.predict(img)
        confidence = np.max(predictions)
        class_idx = np.argmax(predictions)
        
        if confidence < 0.6:  # Confidence threshold
            return {"status": "uncertain"}
        
        return {
            "disease": self.class_names[class_idx],
            "confidence": float(confidence),
            "inference_ms": self.perf_tracker.last_time
        }
```

#### 2. Wise Agronomist (Gemini 1.5 Flash)
**Purpose:** Contextual reasoning and treatment synthesis  
**Performance:**
- **Latency:** ~1.2s (asynchronous, non-blocking)
- **Token Budget:** <150 tokens output
- **Hallucination Rate:** <1% (grounded in deterministic KB)

**Role:**
- Validates symptoms against visual diagnosis
- Generates human-readable explanations
- Adapts advice to weather + location context

> **IMPORTANT:** Treatment recommendations are 100% **deterministic** from the knowledge base. Gemini only provides explanatory context‚Äîit cannot override safety-critical decisions.

---

## üèóÔ∏è System Architecture

```mermaid
graph TB
    subgraph "Frontend Layer (Cloudflare Pages)"
        A[Next.js 14.2 App Router]
        B[PWA + Service Workers]
        C[i18next (EN/HI/MR)]
    end
    
    subgraph "API Layer (Render)"
        D[FastAPI + Pydantic V2]
        E[JWT Validation]
    end
    
    subgraph "AI Layer"
        F[MobileNetV2 Engine]
        G[Gemini 1.5 Flash]
        H[Knowledge Base (JSON)]
    end
    
    subgraph "Data Services"
        I[Firebase Firestore]
        J[OpenWeatherMap API]
    end
    
    A --> D
    B --> D
    D --> F
    F --> G
    G --> H
    D --> I
    D --> J
```

**‚Üí Detailed breakdown:** [DEPLOYMENT.md](https://github.com/yash-ghodele/Sanjivani-MVP/docs/DEPLOYMENT.md)

---

## ‚ö° Core Features

### ü§ñ AI System

- **Model:** MobileNetV2 with ImageNet transfer learning
- **Dataset:** PlantVillage (Tomato, Potato diseases + Healthy states)
- **Classes:** 7 (Expandable to 15+ with Rice/Cotton)
- **Exports:** `.h5` (server) + `.tflite` (edge devices)
- **Benchmarks:**
  - Accuracy: 95%+ (validation set)
  - Precision/Recall: >0.90 (major classes)
  - Inference: ~120ms avg (Render free tier)

### üì° RESTful API v2

**Endpoints:**
- `POST /api/v1/detect` ‚Äî Disease detection (auth required)
- `GET /api/v2/meta/calendar` ‚Äî Crop lifecycle data (public)
- `GET /api/weather` ‚Äî Current weather + forecast (public)
- `GET /api/spraying` ‚Äî Spraying suitability index (public)

**Response Structure:**
```json
{
  "status": "success",
  "data": {
    "disease": "Tomato Late Blight",
    "confidence": 0.957,
    "severity": "high",
    "recommendations": ["Remove infected leaves", "Apply fungicide"],
    "treatment": { "chemical": [...], "organic": [...] },
    "processing_time": 1.23
  }
}
```

### üñ•Ô∏è Next.js Frontend

**Dashboard 2.0:** Modular widget system
- **Weather Widget:** Real-time OpenWeatherMap integration
- **Spraying Index:** Wind/rain/temp analysis for optimal spray timing
- **Activity Timeline:** LocalStorage-backed scan history
- **Real-Time Clock:** Location-aware live clock

**Design System:**
- Theme: "Deep Forest" (#0f110f) + Neon Green (#82ae19)
- Glassmorphism used selectively for emphasis
- Falling leaves animation (particle system)

**i18next Integration:**
- Languages: English, Hindi (‡§π‡§ø‡§®‡•ç‡§¶‡•Ä), Marathi (‡§Æ‡§∞‡§æ‡§†‡•Ä)
- Persistent via `localStorage.language`
- All UI components + AI responses translated

---

## üß™ Testing & Quality

### Test Suite (34 Tests)

| Test File | Coverage | Purpose |
|-----------|----------|---------|
| `test_inference_engine.py` | 12 tests | AI prediction, preprocessing, metadata |
| `test_knowledge_engine.py` | 10 tests | Disease info, severity scoring, multilingual |
| `test_api.py` | 12 tests | API integration, auth, error handling |

**Run Tests:**
```bash
cd backend
pytest tests/ -v --cov=. --cov-report=html
```

**Coverage Target:** 70%+ (current: ~75%)

**CI/CD Ready:** Mock mode allows tests to pass without trained model (GitHub Actions compatible)

---

## üöÄ Deployment Architecture

### Production Stack

**Frontend:** Cloudflare Pages  
**Backend:** Render (Singapore region)  
**Database:** Firebase Firestore  
**CDN:** Cloudflare Edge Network

**Build Configuration:**
```yaml
# Cloudflare Pages
Framework: Next.js
Build Command: npx @cloudflare/next-on-pages
Output: .vercel/output/static
```

```yaml
# Render
Root Directory: backend
Build: pip install -r requirements.txt
Start: uvicorn main:app --host 0.0.0.0 --port $PORT
```

**Environment Variables:**
- `NEXT_PUBLIC_API_URL` ‚Äî Backend URL
- `GEMINI_API_KEY` ‚Äî Google AI Studio
- `FIREBASE_CREDENTIALS` ‚Äî Service account JSON
- `OPENWEATHER_API_KEY` ‚Äî Weather API
- `NEXT_PUBLIC_FIREBASE_*` ‚Äî Firebase public config

---

## üõ°Ô∏è Failure Modes & Safety

### Documented Failure Scenarios

**1. Out-of-Distribution Inputs**
- **Scenario:** User uploads wheat (untrained crop)
- **Mitigation:** Confidence <45% ‚Üí "Uncertain" flag + user warning

**2. Poor Image Quality**
- **Scenario:** Motion blur, extreme backlighting
- **Mitigation:** Low confidence ‚Üí "Retake Photo" prompt

**3. Ambiguous Symptoms**
- **Scenario:** Leaf shows multiple diseases
- **Limitation:** Single-label classifier predicts dominant feature
- **Safety Net:** Gemini identifies secondary symptoms in text

**4. Network Failures**
- **Backend Down:** Returns deterministic diagnosis only (no Gemini context)
- **Offline Mode:** LocalStorage queue for sync-on-reconnect (planned)

**5. False Positives**
- **Scenario:** High confidence error (dirt mistaken for disease)
- **Safety:** All treatments gated with "Consult expert" warnings

**‚Üí Full analysis:** [FAILURE_MODES.md](https://github.com/yash-ghodele/Sanjivani-MVP/docs/FAILURE_MODES.md)

---

## üìä Key Metrics & Performance

### AI Model Benchmarks

| Metric | Result | Assessment |
| :--- | :--- | :--- |
| **Validation Accuracy** | **95%+** | üü¢ Production-Ready |
| **Inference Latency** | **10.64ms** | üü¢ Edge-Ready (<50ms) |
| **Model Size** | **9.0 MB** | üü¢ Lightweight |
| **Gemini Latency** | **~1.2s** | üü¢ Fast (<2s target) |

### System Performance

- **API Response Time:** <200ms (avg ~150ms)
- **Frontend Load Time:** <2s (Cloudflare Edge)
- **Weather Cache:** 5min TTL (reduces API calls)
- **Offline Support:** PWA-ready architecture

---

## ÔøΩ Future Enhancements

### Planned Features
- **Mobile App:** React Native version with on-device TFLite
- **AR Mode:** Point camera for instant overlay diagnosis
- **Community Mapping:** Anonymized disease outbreak alerts
- **Voice Commands:** Regional language voice input
- **Marketplace:** Direct vendor connections for treatments

### Technical Roadmap
- WebSocket for real-time dashboard updates
- Service Worker for full offline scan queue
- GraphQL API for efficient mobile queries
- Model OTA updates via Firebase Remote Config

---

## üéì Portfolio Highlights

This project demonstrates:

1. **System Design Thinking** ‚Äî Clean separation of concerns across layers
2. **Modern Web Engineering** ‚Äî Next.js App Router, typed APIs, SSR
3. **Practical AI Engineering** ‚Äî Inference pipelines, benchmarking, edge readiness
4. **Full-Stack Ownership** ‚Äî Frontend, backend, AI, testing, deployment
5. **Professional Documentation** ‚Äî Written for engineers, not tutorials

**Sanjivani 2.0 is intentionally engineered, not assembled.**

---

## ÔøΩ Technical Documentation

- [Complete Project Flow Report](https://github.com/yash-ghodele/Sanjivani-MVP/docs/project_flow_report.md)
- [AI Training Guide](https://github.com/yash-ghodele/Sanjivani-MVP/docs/AI_TRAINING.md)
- [Deployment Guide](https://github.com/yash-ghodele/Sanjivani-MVP/docs/DEPLOYMENT.md)
- [Testing Documentation](https://github.com/yash-ghodele/Sanjivani-MVP/docs/TESTING.md)
- [Failure Modes Analysis](https://github.com/yash-ghodele/Sanjivani-MVP/docs/FAILURE_MODES.md)

---

<p align="center">
  <sub>Built with care‚Äîfor farmers in the field and engineers reviewing the code.</sub>
</p>
